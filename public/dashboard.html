<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FitTrack Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
      body {
        font-family: 'Roboto', sans-serif;
        background-color: #f5f7fa;
      }
      
      .gradient-bg {
        background: linear-gradient(135deg, #43cea2, #185a9d);
      }
      
      .card-hover:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      }
      
      .progress-bar {
        height: 8px;
        border-radius: 4px;
        background-color: #e9ecef;
        overflow: hidden;
      }
      
      .progress-bar-fill {
        height: 100%;
        border-radius: 4px;
        background: linear-gradient(90deg, #43cea2, #185a9d);
        transition: width 0.5s ease;
      }
      
      .menu-item {
        position: relative;
        transition: all 0.3s ease;
      }
      
      .menu-item:hover {
        background-color: rgba(255, 255, 255, 0.1);
      }
      
      .menu-item.active {
        background-color: rgba(255, 255, 255, 0.2);
      }
      
      .menu-item.active::before {
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
        width: 4px;
        background: #43cea2;
      }

      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.7; }
      }
      
      .pulse-animation {
        animation: pulse 2s infinite;
      }
    </style>
  </head>
  <body>
    <div class="flex min-h-screen">
      <!-- Sidebar -->
      <aside class="gradient-bg text-white w-64 shadow-xl">
        <div class="p-6">
          <div class="flex items-center mb-10">
            <div class="bg-white p-2 rounded-full shadow-md">
              <i class="fas fa-dumbbell text-purple-700 text-xl"></i>
            </div>
            <h1 class="ml-4 text-2xl font-bold">FitTrack</h1>
          </div>
          
          <div class="mb-8">
            <div class="flex items-center mb-4">
              <img src="assests/user_symbol.png" alt="User avatar" class="rounded-full w-12 h-12 border-2 border-white shadow-md" />
              <div class="ml-3">
                <h3 class="font-bold" id="user-name">Loading...</h3>
                <p class="text-xs text-gray-200">Premium Member</p>
              </div>
            </div>
            <div class="bg-white/10 rounded-lg p-4">
              <div class="grid grid-cols-2 gap-4">
                <div>
                  <p class="text-xs text-gray-200">Weight</p>
                  <p class="font-bold" id="user-weight">Loading...</p>
                </div>
                <div>
                  <p class="text-xs text-gray-200">Height</p>
                  <p class="font-bold" id="user-height">Loading...</p>
                </div>
                <div>
                  <p class="text-xs text-gray-200">Age</p>
                  <p class="font-bold" id="user-age">Loading...</p>
                </div>
                <div>
                  <p class="text-xs text-gray-200">BMI</p>
                  <p class="font-bold" id="user-bmi">Loading...</p>
                  <p id="bmi-category" class="text-sm font-medium text-gray-200">Calculating...</p>
                </div>
              </div>
            </div>
          </div>

          <nav>
            <ul>
              <li class="mb-2">
                <a href="#" class="menu-item flex  active items-center px-4 py-3 rounded-lg text-sm">
                  <i class="fas fa-home w-6"></i>
                  <span class="ml-2">Dashboard</span>
                </a>
              </li>
              <!-- <li class="mb-2">
                <a href="#" class="menu-item  flex items-center px-4 py-3 rounded-lg text-sm">
                  <i class="fas fa-chart-line w-6"></i>
                  <span class="ml-2">Progress Tracking</span>
                </a>
              </li> -->
              <li class="mb-2">
                <a href="selectcoach.html" class="menu-item flex items-center px-4 py-3 rounded-lg text-sm">
                  <i class="fas fa-robot w-6"></i>
                  <span class="ml-2">AI Workout Guide</span>
                </a>
              </li>
              <li class="mb-2">
                <a href="nutrition_planner.html" class="menu-item flex items-center px-4 py-3 rounded-lg text-sm">
                  <i class="fas fa-apple-alt w-6"></i>
                  <span class="ml-2">Nutrition Planner</span>
                </a>
              </li>
              <li class="mb-2">
                <a href="coaching_platform.html" class="menu-item flex items-center px-4 py-3 rounded-lg text-sm">
                  <i class="fas fa-user-friends w-6"></i>
                  <span class="ml-2">Coaching Platform</span>
                </a>
              </li>
              <li class="mb-2">
                <a href="prevention_method.html" class="menu-item flex items-center px-4 py-3 rounded-lg text-sm">
                  <i class="fas fa-shield-alt w-6"></i>
                  <span class="ml-2">Prevention Method</span>
                </a>
              </li>
              <li class="mb-2">
                <a href="bone_density.html" class="menu-item flex items-center px-4 py-3 rounded-lg text-sm">
                  <i class="fas fa-bone w-6"></i>
                  <span class="ml-2">Bone Density Check</span>
                </a>
              </li>
            </ul>
          </nav>
          
          <div class="mt-auto pt-6">
            <div class="bg-white bg-opacity-10 rounded-lg p-4 text-sm">
              <div class="flex items-center mb-2">
                <i class="fas fa-medal text-yellow-300 mr-2"></i>
                <span>Weekly Goal</span>
              </div>
              <div class="flex justify-between mb-1 text-xs">
                <span>Progress</span>
                <span>65%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-bar-fill" style="width: 65%"></div>
              </div>
            </div>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="flex-1 p-6">
        <div class="flex justify-between items-center mb-8">
          <div>
            <h2 class="text-3xl font-bold text-gray-800">Progress Dashboard</h2>
            <p class="text-gray-500">Track your fitness journey</p>
          </div>
          <div class="flex space-x-2">
            <button class="bg-gray-200 text-gray-700 hover:bg-gray-300 px-3 py-2 rounded-lg transition">
              <i class="fas fa-bell"></i>
            </button>
            <button class="bg-gray-200 text-gray-700 hover:bg-gray-300 px-3 py-2 rounded-lg transition">
              <i class="fas fa-cog"></i>
            </button>
            <a href="startworkout.html"><button class="gradient-bg text-white px-4 py-2 rounded-lg transition shadow-md hover:shadow-lg">
              <i class="fas fa-plus mr-2"></i> New Workout
            </button></a>
          </div>
        </div>

        <!-- Stats Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
          <!-- Workout Stats -->
          <div class="bg-white rounded-xl shadow-md p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Workout Stats</h3>
            <div class="grid grid-cols-3 gap-4">
              <div>
                <p class="text-sm text-gray-500">Total Workouts</p>
                <p class="text-2xl font-bold text-gray-800" id="total-workouts">0</p>
              </div>
              <div>
                <p class="text-sm text-gray-500">Total Duration</p>
                <p class="text-2xl font-bold text-gray-800" id="total-duration">0h 0m</p>
              </div>
              <div>
                <p class="text-sm text-gray-500">Calories Burned</p>
                <p class="text-2xl font-bold text-gray-800" id="calories-burned">0</p>
              </div>
            </div>
          </div>

          <!-- Nutrition Stats -->
          <div class="bg-white rounded-xl shadow-md p-6">
            <h3 class="text-xl font-bold text-gray-800 mb-4">Today's Nutrition</h3>
            <div class="grid grid-cols-2 gap-4">
              <div>
                <p class="text-sm text-gray-500">Calories</p>
                <p class="text-2xl font-bold text-gray-800" id="calories-consumed">0</p>
              </div>
              <div>
                <p class="text-sm text-gray-500">Protein</p>
                <p class="text-2xl font-bold text-gray-800" id="protein-consumed">0g</p>
              </div>
              <div>
                <p class="text-sm text-gray-500">Carbs</p>
                <p class="text-2xl font-bold text-gray-800" id="carbs-consumed">0g</p>
              </div>
              <div>
                <p class="text-sm text-gray-500">Fat</p>
                <p class="text-2xl font-bold text-gray-800" id="fat-consumed">0g</p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Quick Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
          <div class="bg-white rounded-xl shadow-md p-6 card-hover transition-all">
            <div class="flex justify-between items-center mb-4">
              <div>
                <p class="text-gray-500 text-sm">Workouts</p>
                <h3 class="text-2xl font-bold">24</h3>
              </div>
              <div class="bg-blue-100 p-3 rounded-full">
                <i class="fas fa-dumbbell text-blue-600"></i>
              </div>
            </div>
            <div class="flex items-center text-sm text-green-500">
              <i class="fas fa-arrow-up mr-1"></i>
              <span>12% from last month</span>
            </div>
          </div>
          
          <div class="bg-white rounded-xl shadow-md p-6 card-hover transition-all">
            <div class="flex justify-between items-center mb-4">
              <div>
                <p class="text-gray-500 text-sm">Calories Burned</p>
                <h3 class="text-2xl font-bold">4,320</h3>
              </div>
              <div class="bg-red-100 p-3 rounded-full">
                <i class="fas fa-fire text-red-600"></i>
              </div>
            </div>
            <div class="flex items-center text-sm text-green-500">
              <i class="fas fa-arrow-up mr-1"></i>
              <span>8% from last month</span>
            </div>
          </div>
          
          <div class="bg-white rounded-xl shadow-md p-6 card-hover transition-all">
            <div class="flex justify-between items-center mb-4">
              <div>
                <p class="text-gray-500 text-sm">Weight Lifted</p>
                <h3 class="text-2xl font-bold">15,240 kg</h3>
              </div>
              <div class="bg-purple-100 p-3 rounded-full">
                <i class="fas fa-weight-hanging text-purple-600"></i>
              </div>
            </div>
            <div class="flex items-center text-sm text-green-500">
              <i class="fas fa-arrow-up mr-1"></i>
              <span>5% from last month</span>
            </div>
          </div>
          
          <div class="bg-white rounded-xl shadow-md p-6 card-hover transition-all">
            <div class="flex justify-between items-center mb-4">
              <div>
                <p class="text-gray-500 text-sm">Streak</p>
                <h3 class="text-2xl font-bold">12 days</h3>
              </div>
              <div class="bg-yellow-100 p-3 rounded-full">
                <i class="fas fa-bolt text-yellow-600"></i>
              </div>
            </div>
            <div class="flex items-center text-sm text-green-500">
              <i class="fas fa-arrow-up mr-1"></i>
              <span>Your best: 18 days</span>
            </div>
          </div>
        </div>
        
        <!-- Main Content Area -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <!-- Progress Chart -->
          <div class="lg:col-span-2 bg-white rounded-xl shadow-md p-6">
            <div class="flex justify-between items-center mb-6">
              <h3 class="text-xl font-bold text-gray-800">Chest Progress</h3>
              <div class="flex space-x-2">
                <button class="bg-gray-200 hover:bg-gray-300 text-gray-700 py-1 px-3 rounded-lg text-sm transition">
                  Weekly
                </button>
                <button class="gradient-bg text-white py-1 px-3 rounded-lg text-sm transition shadow">
                  Monthly
                </button>
                <button class="bg-gray-200 hover:bg-gray-300 text-gray-700 py-1 px-3 rounded-lg text-sm transition">
                  Yearly
                </button>
              </div>
            </div>
            <div>
              <img
                src="/api/placeholder/800/400"
                alt="Progress chart showing chest workout data over time"
                class="rounded-lg w-full h-64 object-cover"
              />
            </div>
            <div class="mt-4 grid grid-cols-3 gap-4">
              <div class="text-center">
                <p class="text-gray-500 text-sm">Average</p>
                <p class="font-bold text-lg">75 kg</p>
              </div>
              <div class="text-center">
                <p class="text-gray-500 text-sm">Max</p>
                <p class="font-bold text-lg">95 kg</p>
              </div>
              <div class="text-center">
                <p class="text-gray-500 text-sm">Progress</p>
                <p class="font-bold text-lg text-green-500">+15%</p>
              </div>
            </div>
            <div class="mt-4 flex justify-center">
              <button
                class="bg-blue-500 hover:bg-blue-600 text-white py-2 px-5 rounded-lg font-semibold transition-all"
              >
                <i class="fas fa-table mr-2"></i> Edit Data Table
              </button>
            </div>
          </div>
          
          <!-- Right Sidebar Content -->
          <div class="space-y-6">
            <!-- Today's Workout -->
            <div class="bg-white rounded-xl shadow-md p-6">
              <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-800">Today's Workout</h3>
                <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full">Chest Day</span>
              </div>
              <ul class="space-y-4">
                <li class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                  <div class="flex items-center">
                    <i class="fas fa-check-circle text-green-500 mr-3"></i>
                    <div>
                      <p class="font-medium">Bench Press</p>
                      <p class="text-gray-500 text-xs">4 sets × 8-10 reps</p>
                    </div>
                  </div>
                  <span class="text-sm font-medium">80 kg</span>
                </li>
                <li class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                  <div class="flex items-center">
                    <i class="fas fa-check-circle text-green-500 mr-3"></i>
                    <div>
                      <p class="font-medium">Incline Press</p>
                      <p class="text-gray-500 text-xs">3 sets × 10 reps</p>
                    </div>
                  </div>
                  <span class="text-sm font-medium">65 kg</span>
                </li>
                <li class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                  <div class="flex items-center">
                    <i class="far fa-circle text-gray-400 mr-3"></i>
                    <div>
                      <p class="font-medium">Cable Flyes</p>
                      <p class="text-gray-500 text-xs">3 sets × 12 reps</p>
                    </div>
                  </div>
                  <span class="text-sm font-medium">25 kg</span>
                </li>
                <li class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
                  <div class="flex items-center">
                    <i class="far fa-circle text-gray-400 mr-3"></i>
                    <div>
                      <p class="font-medium">Push-ups</p>
                      <p class="text-gray-500 text-xs">4 sets × 15-20 reps</p>
                    </div>
                  </div>
                  <span class="text-sm font-medium">Body</span>
                </li>
              </ul>
              <button class="w-full mt-4 bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 rounded-lg font-medium transition-all">
                Start Workout
              </button>
            </div>
            
            <!-- AI Suggestions -->
            <div class="bg-white rounded-xl shadow-md p-6">
              <h3 class="text-xl font-bold text-gray-800 mb-4">AI Suggestions</h3>
              <div class="bg-blue-50 border border-blue-100 rounded-lg p-4 mb-4">
                <div class="flex items-start">
                  <div class="bg-blue-100 p-2 rounded-full mr-3">
                    <i class="fas fa-robot text-blue-500"></i>
                  </div>
                  <div>
                    <p class="text-sm">Try increasing bench press weight by 5kg next session. Your progress shows you're ready.</p>
                    <div class="flex justify-end mt-2">
                      <button class="text-blue-500 text-xs hover:underline">Apply</button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="bg-green-50 border border-green-100 rounded-lg p-4">
                <div class="flex items-start">
                  <div class="bg-green-100 p-2 rounded-full mr-3">
                    <i class="fas fa-apple-alt text-green-500"></i>
                  </div>
                  <div>
                    <p class="text-sm">Consider increasing protein intake to 120g on workout days for optimal recovery.</p>
                    <div class="flex justify-end mt-2">
                      <button class="text-green-500 text-xs hover:underline">View Meal Plan</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Muscle Group Buttons -->
        <div class="mt-8">
          <h3 class="text-xl font-bold text-gray-800 mb-4">Muscle Groups</h3>
          <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-6 gap-4">
            <button class="gradient-bg text-white p-4 rounded-xl shadow-md flex flex-col items-center justify-center h-24 card-hover transition-all">
              <i class="fas fa-heartbeat text-2xl mb-2"></i>
              <span>Chest</span>
            </button>
            <button class="bg-white text-gray-800 p-4 rounded-xl shadow-md flex flex-col items-center justify-center h-24 card-hover transition-all">
              <i class="fas fa-dumbbell text-2xl mb-2 text-gray-600"></i>
              <span>Arms</span>
            </button>
            <button class="bg-white text-gray-800 p-4 rounded-xl shadow-md flex flex-col items-center justify-center h-24 card-hover transition-all">
              <i class="fas fa-running text-2xl mb-2 text-gray-600"></i>
              <span>Legs</span>
            </button>
            <button class="bg-white text-gray-800 p-4 rounded-xl shadow-md flex flex-col items-center justify-center h-24 card-hover transition-all">
              <i class="fas fa-child text-2xl mb-2 text-gray-600"></i>
              <span>Back</span>
            </button>
            <button class="bg-white text-gray-800 p-4 rounded-xl shadow-md flex flex-col items-center justify-center h-24 card-hover transition-all">
              <i class="fas fa-weight text-2xl mb-2 text-gray-600"></i>
              <span>Shoulders</span>
            </button>
            <button class="bg-white text-gray-800 p-4 rounded-xl shadow-md flex flex-col items-center justify-center h-24 card-hover transition-all">
              <i class="fas fa-plus text-2xl mb-2 text-gray-600"></i>
              <span>Add More</span>
            </button>
          </div>
        </div>
      </main>
    </div>

    <!-- Footer -->
    <!-- <footer
      class="fixed bottom-0 left-0 right-0 gradient-bg text-white p-3 flex justify-between items-center text-lg font-semibold shadow-lg"
    >
      <span>Need Any Help?</span>
      <button class="bg-white text-purple-700 rounded-full p-2 pulse-animation">
        <i class="fas fa-robot text-lg"></i>
      </button>
    </footer> -->

    <script>
      // User authentication and session management
      let currentUser = null;
      
      // Authentication check
      function checkAuth() {
        const userData = localStorage.getItem('userData');
        if (!userData) {
          window.location.href = '/login.html';
          return;
        }
        
        try {
          const user = JSON.parse(userData);
          // Update UI with user data
          document.getElementById('user-name').textContent = user.name || 'User';
          document.getElementById('user-weight').textContent = `${user.weight} kg`;
          document.getElementById('user-height').textContent = `${user.height} cm`;
          document.getElementById('user-age').textContent = user.age;
          
          // Calculate BMI
          const heightInMeters = user.height / 100;
          const bmi = (user.weight / (heightInMeters * heightInMeters)).toFixed(1);
          document.getElementById('user-bmi').textContent = bmi;
          
          // Update BMI category
          const bmiCategory = getBMICategory(bmi);
          document.getElementById('bmi-category').textContent = bmiCategory;
          document.getElementById('bmi-category').className = `text-sm font-medium ${getBMICategoryColor(bmiCategory)}`;
          
          // Load user's data
          loadUserData(user.id);
        } catch (error) {
          console.error('Error parsing user data:', error);
          logout();
        }
      }

      // Load user data
      async function loadUserData(userId) {
        try {
          // Fetch user's workout sessions
          const workoutResponse = await fetch(`/api/workout/sessions?userId=${userId}`);
          const workoutData = await workoutResponse.json();
          if (workoutData.success) {
            updateWorkoutChart(workoutData.sessions);
          }

          // Fetch user's nutrition logs
          const nutritionResponse = await fetch(`/api/nutrition/logs?userId=${userId}`);
          const nutritionData = await nutritionResponse.json();
          if (nutritionData.success) {
            updateNutritionChart(nutritionData.logs);
          }
        } catch (error) {
          console.error('Error loading user data:', error);
          showNotification('Failed to load user data', 'error');
        }
      }
      
      // Helper functions
      function getBMICategory(bmi) {
        if (bmi < 18.5) return 'Underweight';
        if (bmi < 25) return 'Normal weight';
        if (bmi < 30) return 'Overweight';
        return 'Obese';
      }
      
      function getBMICategoryColor(category) {
        switch (category) {
          case 'Underweight': return 'text-blue-500';
          case 'Normal weight': return 'text-green-500';
          case 'Overweight': return 'text-yellow-500';
          case 'Obese': return 'text-red-500';
          default: return 'text-gray-500';
        }
      }
      
      function formatDuration(minutes) {
        const hours = Math.floor(minutes / 60);
        const mins = minutes % 60;
        return `${hours}h ${mins}m`;
      }
      
      function updateWorkoutChart(workoutSessions) {
        // Implementation for workout chart
        // This would use a charting library like Chart.js
        console.log('Updating workout chart with data:', workoutSessions);
      }
      
      function updateNutritionChart(nutritionLogs) {
        // Implementation for nutrition chart
        // This would use a charting library like Chart.js
        console.log('Updating nutrition chart with data:', nutritionLogs);
      }
      
      function showNotification(message, type = 'info') {
        // Implementation for showing notifications
        console.log(`${type.toUpperCase()}: ${message}`);
      }
      
      // Event listeners
      document.addEventListener('DOMContentLoaded', checkAuth);
      
      // Navigation functions
      function navigateTo(page) {
        window.location.href = `/${page}.html`;
      }
      
      // Logout function
      function logout() {
        localStorage.removeItem('userData');
        localStorage.removeItem('userId');
        localStorage.removeItem('userEmail');
        window.location.href = '/login.html';
      }
    </script>
  </body>
</html>